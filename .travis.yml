language: java
cache:
  directories:
  - "$HOME/.m2"
jdk:
- oraclejdk8
sudo: required
services:
- docker
notifications:
  email:
  - ludovic.piot@soat.fr
  on_success: always
  on_failure: always
branches:
  only:
  - master
env:
  global:
  - secure: YvcLoAxe5cObt64WlW+5m0e0zmiM30OOJHxP71WYhorLtTY+hTw2k54ae2BxmVP7upR5rNJJkzqIDgBspsLeLRkVvsHNyU/94SpAupd1+GUNMg/1tYiFTI6e4RPPxc7/w9stCvr8Z99WCQawfcv30K3ikVbSPhOmMAEpb9BtbdPZ0h70pBdnKd4kxAsMChqqzERylY9qglKgz4xpT2T+pWVT7FizbIW/n8SNuEk2F5xRPxqc/hdcFH/NcQq9YpDUVWC6CdSJN2smcgY+Ksi6T+7R0WzMEXO6m80LDo4Odil29vG0Mf54d+z7Xi6uhtQwnGninSq0oVi1eibO9YgI/R7iZTGFDg8dNi4JBnqiLQ5SxyMwCR7OGsGmWSIEUOV9Hd2LDc/Ed/CSemWjWC/3kkfVDqT6gZfhJeULfWksvfFPZqYc0L0hW718okm4psw925bnQulmapdAWFg3cCubYUllYKdiWBbqPQHISyvTtbFo6/TuNFaNFO13iYvRkAdNbOOu/1QtID9sGPNCfcktOL/gpMc6dQDMiCi9RPnChEDXo2vGtaySG8gT4J/EBUhtuPxJJJ8HJRHLaAZQ0glKhq3PSRTZjrWQf5lZ3nFZwB3w9CbJhcgmnrunaQVe12GR8i1idycbfjXZbadSpH3r0CAQRw9INenEZglPqm5oPMs=
  - secure: kk7ApH3mqeXePhZgZky+dO/Y6sJH4MLOQq7AWxJZK5LnGUi2QOJ57BM34CjC4nvdxPHxKTlnG1Dep0S9Xcnmcq6EvrMsMZj7tRSdHRTfE74BCn51kfh508HZP3i1wgDB6zNXv9OrpRWdqCn7PwQnJ5HwLoM1mW3wIaxbRJHo88eHZ3wC2o+5lm67UkxiHq8zBzIn+N2KHgc0uzQ5MDn+43N4slCpnaTH21IA2p3ZRzv0Bu1FgORwkgE9L37K5wUnMsxPFbFJVK3erhxSuoksYa3h7uC/+f20rGQLylZKrPo/oxdE1hAGTdVXCVfydf3HAI2WkUy7mdlFFelAq4z/uhOS/9tRLmKfAcFx/n8lJp//xGshKBWbZHtmmtMdT4IXQsBt+h5Cm6A7q1OaPXRFJ3guvm+qBypbqYeyV+7ps+e/qbQj8HVG1GOifJDHkzWe1zS1tFw+drILLgG0pdSM0JBMu8V7+AMlJldEYoswUa106sqAECbqyhOt81ShmY+dt2TMeCVnV4dhht48MIpmhA/L/Toh87bcq+DZ0R4P0fzoJdfZU6aSlcTeVSC2T8pEJHNalt2aKmtFpBljPmTT1RoXFRR5BD1BmjYL42TmBVPfEEx2RrXfBxPhxy5RSx2aSHPXapK9VaG12QA0YlUi+9p0nTaBh9XBGN4oILVAHeo=
before_install:
- gem install travis -v 1.8.9 --no-document
- export BUILD_NAME=scc-eurekasvr-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
script:
- sh scripts/travis/tag_build.sh
- sh scripts/travis/build_services.sh
- sh scripts/travis/deploy_to_docker_hub.sh